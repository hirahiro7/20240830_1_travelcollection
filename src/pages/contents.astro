---
import ItemList from '../components/common/ItemList.astro';

import CArr from '../components/CArr.astro';
import AnchorIt from '../components/AnchorIt.astro';
import SliderIt from '../components/SliderIt.astro';

import BagTypeLayout from '../layouts/BagTypeLayout.astro';
import SliderLayout from '../layouts/SliderLayout.astro';
import type { ACTION_ERROR_CODES } from 'astro:actions';
// ダミー商品
const items1 = [{ summary: true }, {}, { sara10: false }, { sale: true }];
const bags = [
  {
    info: [
      {
        link: '/item/BR70999A1304?areaid=sp709_hiroko',
        imgPath: './img/it1.jpg',
        name: 'BOSTON BAG',
        price: '49,500',
        desc: 'トートバッグとハンドバッグの2WAY仕様。<br>1～2泊程度の旅行におすすめのサイズでキャリーオンが可能です。ショルダー部分は太めのナイロンベルトで肩に負担がかかりにくい仕様になっています。',
        target: 1,
      },
    ],
    slides: [
      {
        imgPath: './img/sc1-1.jpg',
        desc: '2つの持ち手で、手で持っても肩に掛けてもバランスよくお持ちいただけます。',
      },
      {
        imgPath: './img/sc1-2.jpg',
        desc: 'スーツケースのハンドル部分に通すスリーブ付きで、持ち運びに便利。',
      },
      {
        imgPath: './img/sc1-3.jpg',
        desc: '内ポケットも充実。<br>お揃いのポーチM・Sも使ってさらに使いやすく。',
      },
    ],
  },
  {
    info: [
      {
        link: '/item/BR70999A1305?areaid=sp709_hiroko',
        imgPath: './img/it2.jpg',
        name: '2WAY BOSTON BAG',
        price: '44,000',
        desc: 'ハンドバッグとショルダーバッグの2WAY仕様。1泊程度の旅行におすすめのサイズでキャリーオンが可能です。ノートPCがちょうど入るサイズでお仕事バッグとしても〇<br>ショルダー部分は太めのナイロンベルトで肩に負担がかかりにくい仕様になっています。',
        target: 2,
      },
    ],
    slides: [
      {
        imgPath: './img/sc2-1.jpg',
        desc: 'ファスナーでしっかり閉まるボストンバッグは機内持ち込みにも最適。',
      },
      {
        imgPath: './img/sc2-2.jpg',
        desc: '両手の空くショルダータイプはアクティブなご旅行はもちろん、荷物の多いお仕事にも。',
      },
      {
        imgPath: './img/sc2-3.jpg',
        desc: 'スーツケースの取っ手に通して、スリーブの内側のボタンを留めれば、横滑りせず安定した使い心地に。',
      },
    ],
  },
  {
    info: [
      {
        link: '/item/BR70999A1306?areaid=sp709_hiroko',
        imgPath: './img/it3.jpg',
        name: 'SACOCHE',
        price: '27,500',
        desc: '旅先や普段のおでかけにも便利な貴重品をまとめて収納できるサイズのサコッシュ。薄マチ仕様で移動が多い時でもかさばらずお使いいただけます。',
        target: 3,
      },
    ],
    slides: [
      {
        imgPath: './img/sc3-1.jpg',
        desc: '貴重品、必需品をしっかり収納。<br>忘れ物はないですか？',
      },
      {
        imgPath: './img/sc3-2.jpg',
        desc: 'ひっそり隠れた便利な外ポケット。<br>スプーンの引手がアクセントに。',
      },
      {
        imgPath: './img/sc3-3.jpg',
        desc: '小ぶりで薄マチだから、夏の薄着にも合わせやすく、冬はコートの中に忍ばせても〇',
      },
    ],
  },
  {
    info: [
      {
        link: '/item/BR70999A1307?areaid=sp709_hiroko',
        imgPath: './img/it4-1.jpg',
        name: 'TRAVEL POACH<M>',
        anchorcap: 'TRAVEL POACH<br>&lt;M&gt;',
        price: '19,800',
        desc: '旅行に特化したトラベルポーチ。衣類やスタイリングアイテムが入るサイズです。内ポケットもあるので、どこに入れたか忘れがちな細々した物もまとめてこちらに。旅先の整理整頓に活躍間違いなし！',
        target: 41,
      },
      {
        link: '/item/BR70999A1308?areaid=sp709_hiroko',
        imgPath: './img/it4-2.jpg',
        name: 'TRAVEL POACH<S>',
        anchorcap: 'TRAVEL POACH<br>&lt;S&gt;',
        price: '17,600',
        desc: 'スキンケアアイテムやコスメが入るサイズで普段使いにもおすすめです。シンプルなつくりだから、どう使うか、何を入れるかはあなた次第。',
        target: 42,
      },
    ],
    slides: [
      {
        imgPath: '',
        desc: 'スーツケースの中身の整理にポーチが便利！<br>おみやげの収納場所もお忘れなく。',
      },
      {
        imgPath: '',
        desc: 'ブラックとベージュの2色展開だから、中身に合わせて色分けして使うのもおすすめです。',
      },
      {
        imgPath: '',
        desc: '1日分の洋服のセットを入れてみたり、嵩張るスキンケアやスタイリングアイテムをまとめてみたり。旅行の準備もはかどりそう。',
      },
    ],
  },
];
---

<!-- sample webfont -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:ital,wght@0,200..900;1,200..900&family=Vujahday+Script&display=swap" rel="stylesheet">

<!-- html -->
<article class="trravel">
  <div class="trravel__main">
    <div class="trravel-main">
      <img class="trravel-main__img" src="./img/mv_pc.jpg" alt="" />
      <h2 class="trravel-main__ttl">
        <img src="./img/logo.jpg" alt="BUONVIAGGIO" />
      </h2>
      <CArr />
      <p class="trravel-main__lead">
        旅の相棒バッグはお持ちですか？<br />
        この度ヒロコ ハヤシからトラベルコレクションがデビュー。<br />
        遊び心と実用性を兼ね備えた、旅行に必須なアイテムを揃えました。<br />
        お気に入りの相棒と共に素敵な旅にでかけませんか。
      </p>
    </div>
  </div>
  <div class="trravel__collection">
    <div class="trravel-collection">
      <p class="trravel-collection__sub">TRAVEL Collection</p>
      <p class="trravel-collection__main">COMODA</p>
      <p class="trravel-collection__ja">コモダ</p>
      <div class="trravel-collection__txt">
        <p>
          COMODA…快適<br />
          ミラノの街の地図を地元の人が手書きで描いてくれたら！<br class="is-sp">という遊び心から生まれたオリジナルプリントの<br class="is-sp">トラベルコレクション。<br />
          撥水性のあるナイロン素材は実用性と高級感があり、<br class="is-sp">旅を快適にしてくれるアイテムに仕上げました。
        </p>
      </div>
    </div>
  </div>
  <div class="trravel__anchor">
    <div class="trravel-anchor">
      <p class="trravel-anchor__ttl">TRAVEL with COMODA</p>
      <div class="trravel-anchor__wrap">
        {bags.map((bag, index) => <AnchorIt {...bag}/>)}
      </div>
    </div>
  </div>
  <div class="trravel__wrap">
    {
      bags.map((bag, index) => (
        <BagTypeLayout index={index} {...bag}>
          <SliderLayout>
            {bag.slides.map((slide, index) => (
              <SliderIt {...slide} />
            ))}
          </SliderLayout>
        </BagTypeLayout>
      ))
    }
  </div>
  <div class="trravel__btn">
    <a href="/s/brand/hirokohayashi/search?st=1&un=fku&link_id=709_H_search&fr=COMODA">VIEW ALL</a>
  </div>
  <div class="trravel__campaign">
    <div class="trravel-campaign">
      <p class="trravel-campaign__ttl"></p>
      <CArr />
      <div class="trravel-campaign__wrap"></div>
      <div class="trravel-campaign__desc">
        <p>「COMODA」発売を記念してCOMODAシリーズと同じプリントを使ったストックバッグをプレゼント。</p>
        <dl>
          <dt>期間</dt>
          <dd>8/30(金)～ 無くなり次第終了</dd>
        </dl>
        <dl>
          <dt>条件</dt>
          <dd>期間中、バッグをお買い上げの方にプレゼント<span class="is-note">一部対象外あり。詳しくはスタッフにお尋ねください。</span></dd>
        </dl>
        <dl>
          <dt>対象店舗</dt>
          <dd><a href="/real-store-search?pcf=1&br=BR709" target="_blank">直営店舗全店</a><span class="is-note">オンラインストアは対象外です。</span></dd>
        </dl>
      </div>
    </div>
  </div>
  <div class="trravel__logo">
    <img src="./img/logo.jpg" alt="BUONVIAGGIO" />
  </div>
</article>

<style lang="scss" is:global>
  .trravel {
    inline-size: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-inline-size: 320px;
    letter-spacing: .05em;
    font-family: "游ゴシック体", YuGothic, "游ゴシック Medium", "Yu Gothic Medium", "游ゴシック", "Yu Gothic", sans-serif;

    img{
      max-inline-size: 100%;
      height: auto;
    }

    &__main{
      position: relative;
    }

    &__collection{
      position: relative;
      margin-block-start: vw(80);
    }

    &__anchor{
      position: relative;
      margin-block-start: vw(80);
      background: url('./img/bg.jpg') center / cover no-repeat;
      padding: vw(50) vw(12);
      box-sizing: border-box;
    }

    &__wrap {
      position: relative;
      margin-block-start: vw(100);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: vw(150);
    }

    &__btn {
      position: relative;
      margin-block-start: vw(100);
    }

    &__campaign {
      position: relative;
      margin-block-start: vw(200);
    }

    &__logo {
      position: relative;
      margin-block-start: vw(100);
    }
}

.trravel-main{
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;

  &__img{
    position: relative;

    img{
      inline-size: 100%;
    }
  }

  &__ttl{
    position: relative;
    inline-size: vw(300);
    margin-block-start: vw(50) !important;
  }

  > .carr{
    margin-block-start: vw(50);
  }

  &__lead{
    font-size: vw(11);
    line-height: calc(#{30/11});
    margin-block-start: vw(50);
    text-align: center;
  }
}

.trravel-collection{
  display: flex;
  flex-direction: column;
  align-items: center;

  &__sub{
    @include font1();
    font-weight: bold;
    font-size: vw(16);
    line-height: 1.0;
  }

  &__main{
    @include font1();
    font-weight: bold;
    font-size: vw(28);
    line-height: 1.0;
    margin-block-start: vw(15);
  }

  &__ja{
    font-size: vw(11);
    line-height: 1.0;
    margin-block-start: vw(15);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: vw(20);

    &::after{
      content: "";
      background: #000;
      inline-size: vw(12);
      block-size: 1px;
    }
  }

  &__txt{
    font-size: vw(11);
    line-height: calc(#{30/11});
    margin-block-start: vw(15);
    text-align: center
  }
}

.trravel-anchor{
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: vw(54) vw(6);
  box-sizing: border-box;
  background: #fff;

  &__ttl{
    @include font1();
    font-weight: bold;
    font-size: vw(16);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: vw(20);

    &::after{
      content: "";
      background: #000;
      inline-size: vw(12);
      block-size: 1px;
    }
  }

  &__wrap{
    position: relative;
    margin-block-start: vw(50);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: vw(10) vw(7);
  }

}
</style>

<!-- javascript -->
<script>
  (function ($) {
    $(document).ready(function () {
      const inview = (function () {
        $(window).on('load scroll resize', function () {
          var wself = $(this);
          var offset = wself.height() / 4;
          wself.scrollTop() + offset;
          var windowBtm = wself.scrollTop() + wself.height() - offset;
          $('.is-target').each(function () {
            var self = $(this);
            var targetPosTop = self.offset().top;
            self.offset().top + self.outerHeight();
            if (windowBtm >= targetPosTop) {
              self.addClass('is-active');
            }
          });
        });
      })();
    });
  })($);
</script>
